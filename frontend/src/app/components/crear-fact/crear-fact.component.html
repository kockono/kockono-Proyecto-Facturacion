<app-sidebar></app-sidebar>
<main class="s-layout__content">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <app-cards></app-cards>

<div class="contenedor">
  
  <div  *ngFor="let emp of datosEmpresaService2.DatosEmpresa; let i = index">
    {{counter(i+2)}}
  </div>
    <legend class="center"> Generar Factura </legend>
    <form #empresaForm="ngForm" (ngSubmit)="onSubmit(empresaForm)">
      <input type="hidden" name="_id" #name="ngModel" [(ngModel)]="datosEmpresaService2.selectEmpresa._id">
      <div class="form-row">
       
        <div class="form-group col-md-2">
          <label for="inputZip" >Folio:</label>
          <a type="text"class="form-control" id="inputFolio" name="folio" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.folio">{{folio}}</a>
        </div>
        <div class="form-group col-md-5">
          <label for="inputZip">Fecha:</label>
          <a type="text" class="form-control" id="inputFecha" name="fecha" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.fecha" placeholder="Fecha">{{now}}</a>
        </div>
        <div class="form-group col-md-5">
          <label for="inputZip">Fecha Expir:</label>
          <a type="text" class="form-control" id="inputFecha" name="fechaExpir" >{{fech}}</a>
        </div>
        <div class="form-group col-md-4">
          <label for="inputState">Cliente: </label>
          <input type="text" list="Clientes" class="form-control busqueda" name="nombreDeLaEmpresa" [(ngModel)]='selectedClientes' (change)="eso(selectedClientes,empresaForm)">
          <datalist  id="Clientes">
            <!-- <select> -->
              <option  *ngFor="let emp of datosEmpresaService.DatosEmpresa" [value]="emp.nombreDeLaEmpresa"></option>  
            <!-- </select> -->
          </datalist>
        </div>

        <label for="inputState" hidden>id: </label>
        <a type="text" class="form-control"[(ngModel)]='selectedid' name="_id" hidden> {{idCliente}}</a>
        <div class="form-group col-md-2">
          <label for="inputState">Metodo de pago: </label>
        <a type="text" class="form-control"  name="metodo"#name="ngModel" 
        [(ngModel)]="datosEmpresaService2.selectEmpresa.metodo" >{{met}}</a>
          
        </div>
        <div class="form-group col-md-1">
          <label for="inputState">Dias: </label>
        <a type="text" class="form-control" name="dias">{{di}}</a>
        </div>
        <div class="form-group col-md-4">
          <label for="inputState">Forma de pago: </label>
          <select type="text" class="form-control"  name="forma" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.forma">
            <option value="99 por definir">99 por definir</option>
            <option value="Efectivo">Efectivo</option>
            <option value="Tarjeta">Tarjeta</option>
            <option value="Vale/Otros">Vale/Otros</option>
            <option value="Transferencia electronica">Transferencia electronica</option>
          </select>
          </div>
        <div class="form-group col-md-4">
          <label for="inputState">CFDi: </label>
          <select type="text" class="form-control"  name="cfdi" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.cfdi">
            <option value="P01 Por Definir">P01 Por Definir</option>
            <option value="G01 Adquisiscion de mercancia">G01 Adquisiscion de mercancia</option>
            <option value="G02 Devoluciones, Descuentos o Bonificaciones">G02 Devoluciones, Descuentos o Bonificaciones</option>
            <option value="G03 Gastos en General">G03 Gastos en General</option>
            <option value="I01 Construcciones">I01 Construcciones</option>
            <option value="I02 Mobiliario y Equipo de Oficina por Inversiones">I02 Mobiliario y Equipo de Oficina por Inversiones</option>
            <option value="I02 Mobiliario y Equipo de Oficina por Inversiones">I02 Mobiliario y Equipo de Oficina por Inversiones</option>
            <option value="I03 Equipo de Transporte">I03 Equipo de Transporte</option>
            <option value="I04 Equipo de Cómputo y Accesorios">I04 Equipo de Cómputo y Accesorios</option>
            <option value="I05 Dados, Troqueles, Moldes, Matrices y Herramental">I05 Dados, Troqueles, Moldes, Matrices y Herramental</option>
            <option value="I06 Comunicaciones Telefónicas">I06 Comunicaciones Telefónicas</option>
            <option value="I07 Comunicaciones Satelitales">I07 Comunicaciones Satelitales</option>
            <option value="I08 Otra Maquinaria y Equipo">I08 Otra Maquinaria y Equipo</option>
            <option value="D01 Honorarios Médicos, Dentales y Gastos Hospitalarios">D01 Honorarios Médicos, Dentales y Gastos Hospitalarios</option>
            <option value="D02 Gastos Médicos por Incapacidad o Discapacidad">D02 Gastos Médicos por Incapacidad o Discapacidad</option>
            <option value="D03 Gastos Funerales">D03 Gastos Funerales</option>
            <option value="D04 Donativos">D04 Donativos</option>
            <option value="D05 Intereses Reales Efectivamente Pagados por Créditos Hipotecarios (Casa Habitación)">D05 Intereses Reales Efectivamente Pagados por Créditos Hipotecarios (Casa Habitación)</option>
            <option value="D06 Aportaciones Voluntarias al SAR">D06 Aportaciones Voluntarias al SAR</option>
            <option value="D07 Primas por Seguros de Gastos Médicos">D07 Primas por Seguros de Gastos Médicos</option>
            <option value="D08 Gastos de Transportación Escolar Obligatoria">D08 Gastos de Transportación Escolar Obligatoria</option>
            <option value="D09 Depósitos en Cuentas para el Ahorro, Primas que tengan como Base Planes de Pensiones">D09 Depósitos en Cuentas para el Ahorro, Primas que tengan como Base Planes de Pensiones</option>
            <option value="D010 Pagos por Servicios Educativos (Colegiaturas)">D010 Pagos por Servicios Educativos (Colegiaturas)</option>
          </select>
        </div>
        
        <div class="form-group col-md-3">
          <label for="inputZip">Orden de compra:</label>
          <input type="text" class="form-control"   id="inputordenDeCompra" name="ordenDeCompra" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.ordenDeCompra"  placeholder="Orden">
        </div>
        <div class="form-group col-md-4">
          <label for="inputZip">Condiciones:</label>
          <input type="text" class="form-control"   id="inputCondiciones" name="condiciones" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.condiciones"  placeholder="Condiciones">
        </div>
        <div class="form-group col-md-7">
          <label for="inputZip">Vendedor:</label>
          <input type="text" class="form-control"   id="inputVendedor" name="vendedor" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.vendedor"  placeholder="Vendedor">
        </div>
        <div class="form-group col-md-5">
          <label for="inputZip">Via de embarque:</label>
          <input type="text" class="form-control"   id="inputViaDeEmbarque" name="viaDeEmbarque" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.viaDeEmbarque"   placeholder="Via de embarque">
        </div> 
        <div class="form-group col-md-12">
          <label for="inputZip">Razón Social:</label>
          <a type="text" class="form-control" id="inputRazon" name="razon" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.razon" placeholder="Razon">{{raz}}</a>
        </div>  
        <div class="form-group col-md-2">
          <label for="inputState">Nombre: </label>
          <input type="text" list="Nombre" class="form-control busqueda" name="nombre" 
          [(ngModel)]='datosEmpresaService2.selectEmpresa.nombre' (change)="ora(datosEmpresaService2.selectEmpresa.nombre,empresaForm)" >
          <datalist  id="Nombre">
            <!-- <select> -->
              <option  *ngFor="let emp of articuloServicioService.DatosArtServ" [value]="emp.nombre" ></option>  
            <!-- </select> -->
          </datalist> 
        </div> 

        <div class="form-group col-md-2">
          <label for="inputZip">Articulo:</label>
          <a type="text" class="form-control"   id="inputArticulo" name="articulo" 
          #name="ngModel" [(ngModel)]="datosEmpresaService2.selectEmpresa.articulo"  placeholder="Articulo">{{articulo}}</a>
        </div>

        <div class="form-group col-md-1">
          <label for="inputZip">Unidades:</label>
          <input type="number" class="form-control"   id="inputUnidades" name="unidades" 
          #name="ngModel" [(ngModel)]="datosEmpresaService2.selectEmpresa.unidades" placeholder=1>
        </div>        
        <div class="form-group col-md-1">
          <label for="inputZip">Precio:</label>
          <a type="text" class="form-control"   id="inputPrecio" name="precio" #name="ngModel"
           [(ngModel)]="datosEmpresaService2.selectEmpresa.precio"   placeholder="Precio">{{precio}}</a>
        </div>
        <div class="form-group col-md-1">
          <label for="inputZip">Descto.:</label>
          <a type="text" class="form-control"   id="inputDescuento" name="descuento" #name="ngModel"
           [(ngModel)]="datosEmpresaService2.selectEmpresa.descuento"  placeholder="Descto">{{descuento}}</a>
        </div>
        <div class="form-group col-md-2">
          <label for="inputZip">U.Med:</label>
          <a type="text" class="form-control"   id="inputUMed" name="uMed" #name="ngModel"
           [(ngModel)]="datosEmpresaService2.selectEmpresa.uMed"  placeholder="U.Med">{{Umed}}</a>
        </div> 
        <div class="form-group col-md-1">
          <label for="inputZip">Agregar</label>
          <br>
          <button class="btn btn-custom right" type="button"  (click)="nada(empresaForm)" >+</button>
        </div> 

        <div class="row form-group col-md-12" *ngFor="let row of te">
           
          <div class="form-group col-md-2">
           <a type="text" class="form-control">{{row[0]}}</a>
          </div>
          <div class="form-group col-md-2">
            <a type="text" class="form-control">{{row[1]}}</a>
          </div>
          <div class="form-group col-md-1">
            <a type="text" class="form-control">{{row[2]}}</a>
          </div>
          <div class="form-group col-md-1">
            <a type="text" class="form-control">{{row[3]}}</a>
          </div>
          <div class="form-group col-md-1">
            <a type="text" class="form-control">{{row[4]}}</a>
          </div>
          
          <div class="form-group col-md-2">
            <a type="text" class="form-control" >{{row[5]}}</a>
          </div>
          <div class="form-group col-md-1">
            <a type="text" class="form-control">{{row[2]*row[3]}}</a>
          </div>

      </div>  
                
        <!-- <div *ngFor="let emp of te; let i = index; trackBy: trackByFn">
          -{{emp.Unidades}}
        </div> -->
        
        

        <div class="form-group col-md-3">
          <label for="inputZip">Subtotal:</label>
          <a type="text" class="form-control"  id="inputSubtotal" name="subtotal" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.subtotal"  placeholder="Subtotal">{{sumado}}</a>
        </div>

        <div class="form-group col-md-3">
          <label for="inputZip">IVA:</label>
          <input type="number" class="form-control"  id="inputIva" name="iva" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.iva"  placeholder="16"
          (change)="ora2(datosEmpresaService2.selectEmpresa.iva,empresaForm,$event)">
        </div>

        <div class="form-group col-md-5">
          <label for="inputZip">Total:</label>
          <a type="text" class="form-control"  id="inputTotal" name="total" #name="ngModel" 
          [(ngModel)]="datosEmpresaService2.selectEmpresa.total"   placeholder="Total">{{tots}}</a>
        </div>

        
        
      </div>

      <button class="btn" type="button"  (click)="resetForm(empresaForm)" > Reset </button>

      <button class="boton" type="submit" [disabled]="!empresaForm.valid" >Finalizar</button>

    </form>
    
  </div>
  
  
    
  <br>

</main>

  